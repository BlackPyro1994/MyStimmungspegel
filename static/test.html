<html>
    <head>
        <title>Test!</title>
    </head>
    <body>
        <div id="test"></div>
    
        <script src="https://cdn.webrtc-experiment.com/MediaStreamRecorder.js"></script>
        <script>
            var mediaConstraints = {
                audio: true,
                video: false
            };
            
            navigator.getUserMedia(mediaConstraints, onSuccess, onError);
            
            function onSuccess(stream) {
                var mediaRecorder = new MediaStreamRecorder(stream);
                mediaRecorder.mimeType = 'audio/wav';
                mediaRecorder.ondataavailable = function(blob) {
                    mediaRecorder.stop();
                   var blobUrl = URL.createObjectURL(blob);
                   console.log(blobUrl);
                   document.getElementById('test').innerHTML = '<a href="' + blobUrl + '">' + blobUrl + '</a>'; 
                }
                mediaRecorder.start(10000);
            }
            
            function onError(e) {
                console.error('media error', e);
            }
        </script>
    </body>
</html>
